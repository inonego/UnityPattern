# íƒ€ì´ë¨¸ (Timer)

- ê²Œì„ ë¡œì§ì—ì„œ ìì£¼ ì‚¬ìš©í•˜ëŠ” **ì¹´ìš´íŠ¸ë‹¤ìš´ ë° ì§€ì—° ì²˜ë¦¬**ë¥¼ ì¼ê´€ë˜ê²Œ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ìœ í‹¸ë¦¬í‹°ì…ë‹ˆë‹¤.
- Unity ì—”ì§„(`MonoBehaviour`)ì— ì˜ì¡´í•˜ì§€ ì•ŠëŠ” ìˆœìˆ˜ C# êµ¬í˜„ì²´ë¡œ, ì–´ëŠ í™˜ê²½ì—ì„œë‚˜ ìœ ì—°í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

### ğŸ—ï¸ ì£¼ìš” íƒ€ì… (Key Types)

- **`TimerState`**: íƒ€ì´ë¨¸ì˜ ìƒíƒœë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì—´ê±°í˜•ì…ë‹ˆë‹¤. (`Ready`, `Run`, `Pause`)
- **`TimerEndEventArgs`**: íƒ€ì´ë¨¸ ì¢…ë£Œ ì‹œ(`OnEnd`) ì „ë‹¬ë˜ëŠ” ì´ë²¤íŠ¸ ì¸ì êµ¬ì¡°ì²´ì…ë‹ˆë‹¤.
- **`IReadOnlyTimer`**: ì™¸ë¶€ì—ì„œ ìƒíƒœ/ì‹œê°„/ì´ë²¤íŠ¸ë¥¼ **ì½ê¸°ë§Œ ê°€ëŠ¥í•œ** ì¸í„°í˜ì´ìŠ¤ì…ë‹ˆë‹¤. ì§ì ‘ ê°’ì„ ë³€ê²½í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
- **`ITimer`**: ì‹œê°„ ì„¤ì •, ì—…ë°ì´íŠ¸, ì œì–´ ê¸°ëŠ¥ì„ ëª¨ë‘ í¬í•¨í•˜ëŠ” **ì „ì²´ ì œì–´ìš©** ì¸í„°í˜ì´ìŠ¤ì…ë‹ˆë‹¤.
- **`Timer`**: `ITimer`ì™€ `IReadOnlyTimer`ë¥¼ ëª¨ë‘ êµ¬í˜„í•œ ì‹¤ì œ í´ë˜ìŠ¤ì…ë‹ˆë‹¤. `Update()`ì—ì„œ `Time.deltaTime`ì„ ì‚¬ìš©í•˜ì—¬ Unityì™€ ìì—°ìŠ¤ëŸ½ê²Œ ì—°ë™ë©ë‹ˆë‹¤.

---

### âš™ï¸ ì¸í„°í˜ì´ìŠ¤ ë° ì†ì„± ìš”ì•½ (API Summary)

#### 1. ê³µí†µ ìƒíƒœ ë° ì´ë²¤íŠ¸
- **ìƒíƒœ**: `IsRunning`, `IsPaused`, `Current` (TimerState)
- **ì´ë²¤íŠ¸**:
  - `OnEnd`: ê²½ê³¼ ì‹œê°„ì´ `Duration`ì— ë„ë‹¬í–ˆì„ ë•Œ í˜¸ì¶œ
  - `OnStateChange`: ìƒíƒœê°€ ë³€ê²½ë  ë•Œ ì´ì „/í˜„ì¬ ìƒíƒœë¥¼ í¬í•¨í•˜ì—¬ í˜¸ì¶œ

#### 2. ì‹œê°„ ê´€ë ¨ í”„ë¡œí¼í‹°
- **`Duration`**: íƒ€ì´ë¨¸ì˜ ì´ ì§€ì† ì‹œê°„ (0 ì´ìƒ)
- **`ElapsedTime`**: í˜„ì¬ ê²½ê³¼ ì‹œê°„ (0 ~ Duration)
- **`RemainingTime`**: ë‚¨ì€ ì‹œê°„ (`Duration - ElapsedTime`)
- **ì •ê·œí™” ê°’ (0~1)**: `ElapsedTime01`, `RemainingTime01`

---

### ğŸ”„ ë™ì‘ ë°©ì‹ ë° ì œì–´ (Workflow & Control)

#### ì—…ë°ì´íŠ¸ (Update)
- `Update(deltaTime)`: ì™¸ë¶€ì—ì„œ ì „ë‹¬í•œ ì‹œê°„ë§Œí¼ íƒ€ì´ë¨¸ë¥¼ ì§„í–‰ì‹œí‚µë‹ˆë‹¤. `Duration` ë„ë‹¬ ì‹œ `OnEnd` í˜¸ì¶œ í›„ ìë™ìœ¼ë¡œ `Stop()`ë©ë‹ˆë‹¤.
- `Update()`: ë‚´ë¶€ì ìœ¼ë¡œ `Time.deltaTime`ì„ ì‚¬ìš©í•˜ëŠ” í¸ì˜ ë©”ì„œë“œì…ë‹ˆë‹¤.

#### ìƒíƒœ ì œì–´
- **`Start(duration)`**: `Ready` ìƒíƒœì—ì„œ ì‹œì‘í•©ë‹ˆë‹¤. ì‹œê°„ê³¼ ìƒíƒœë¥¼ ì´ˆê¸°í™”í•˜ê³  ì‘ë™ì„ ì‹œì‘í•©ë‹ˆë‹¤.
- **`Stop()`**: ì‘ë™ ì¤‘ì´ê±°ë‚˜ ì¼ì‹œì •ì§€ì¸ íƒ€ì´ë¨¸ë¥¼ `Ready` ìƒíƒœë¡œ ë˜ëŒë¦½ë‹ˆë‹¤.
- **`Pause()` / `Resume()`**: ì‘ë™ ì¤‘ì¸ íƒ€ì´ë¨¸ë¥¼ ì¼ì‹œì •ì§€í•˜ê±°ë‚˜ ë‹¤ì‹œ ì¬ê°œí•©ë‹ˆë‹¤.
- **`Reset()`**: `Duration`ê³¼ `ElapsedTime`ì„ ëª¨ë‘ 0ìœ¼ë¡œ ì´ˆê¸°í™”í•©ë‹ˆë‹¤. (`Ready` ìƒíƒœì—ì„œë§Œ ê°€ëŠ¥)

---

### ğŸ“ ì‚¬ìš© ì˜ˆì‹œ (Examples)

#### 1. ë‹¨ìˆœ ì¹´ìš´íŠ¸ë‹¤ìš´
```csharp
private Timer timer = new();

void Start() {
    timer.Start(3.0f);
    timer.OnEnd += (s, e) => Debug.Log("ì¢…ë£Œ!");
}

void Update() => timer.Update(Time.deltaTime);
```

#### 2. ì¼ì‹œì •ì§€ ê°€ëŠ¥í•œ ì¿¨íƒ€ì„ UI
```csharp
public void UseSkill() {
    if (cooldownTimer.IsRunning || cooldownTimer.IsPaused) return;
    cooldownTimer.Start(5.0f);
}

void Update() {
    cooldownTimer.Update(Time.deltaTime);
    if (cooldownTimer.IsRunning) 
        text.text = cooldownTimer.RemainingTime.ToString("0.0");
}
```

---

### âš ï¸ ì£¼ì˜ì‚¬í•­ ë° ì˜ˆì™¸ (Exceptions)

- **`AlreadyRunningException`**: íƒ€ì´ë¨¸ê°€ ì‘ë™ ì¤‘ì¼ ë•Œ ë‹¤ì‹œ `Start`ë¥¼ í˜¸ì¶œí•˜ë©´ ë°œìƒí•©ë‹ˆë‹¤.
- **`FailedToResetException`**: ì‘ë™ ì¤‘ì¼ ë•Œ `Reset`ì„ í˜¸ì¶œí•˜ë©´ ë°œìƒí•©ë‹ˆë‹¤. ì •ì§€ í›„ ë¦¬ì…‹í•´ì•¼ í•©ë‹ˆë‹¤.
- **`InvalidTimeException`**: ì‹œê°„ ê°’ìœ¼ë¡œ 0 ë¯¸ë§Œì„ ì„¤ì •í•˜ë ¤ê³  í•  ë•Œ ë°œìƒí•©ë‹ˆë‹¤.
- **ìˆ˜ë™ ì—…ë°ì´íŠ¸**: ë°˜ë“œì‹œ ì™¸ë¶€(Update ë“±)ì—ì„œ `Update()`ë¥¼ í˜¸ì¶œí•´ì£¼ì–´ì•¼ ì‹œê°„ì´ íë¦…ë‹ˆë‹¤.
